package rules

import ma.medtech.drools.model.Client;
import ma.medtech.drools.model.Transaction;

rule "[R2]Alerte transaction fraud"
when
  $c: Client($c.getTotalAmount() >= 10000.0)
then
  System.out.println("FRAUD attempt detected. Client '" + $c.getName() + "' reached a total amount of " + $c.getTotalAmount());
end

rule "[R1] Cumul du montant de la transaction"
when
  $t : Transaction($clientId: clientId, amount > 0)
  $c: Client(id == $clientId)
then
  $c.setTotalAmount($c.getTotalAmount() + $t.getAmount());
  update($c);
  System.out.println("Transaction of " + $t.getAmount() + " added to client '" + $c.getName() + "'. New total amount is " + $c.getTotalAmount());
end
